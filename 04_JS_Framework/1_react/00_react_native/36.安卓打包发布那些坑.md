1. 发布签名 apk   

[官方教程](https://facebook.github.io/react-native/docs/signed-apk-android.html)写的很详细了，简单说两点：   

1）生成 key
2）配置 gradle

2. 其中遇到的问题：   

1）classPath 报错   

- 问题描述，具体如下

```bash
> Could not resolve all files for configuration ':classpath'.
   > Could not find com.android.tools.build:gradle:3.0.1.
     Searched in the following locations:
         https://jcenter.bintray.com/com/android/tools/build/gradle/3.0.1/gradle-3.0.1.pom
         https://jcenter.bintray.com/com/android/tools/build/gradle/3.0.1/gradle-3.0.1.jar
     Required by:
     ...
```

- 问题分析：   

原因是com.android.tools.build:gradle:3.0.1插件需要到google的maven仓库下载。参考：[Migrate to Android Plugin for Gradle 3.0.0](https://developer.android.com/studio/build/gradle-plugin-3-0-0-migration.html#apply_plugin)   

- 解决：   

在 android > build.gradle 添加 google 的 maven 仓库，如下：

```js
buildscript {
    repositories {
        //新的插件需要在google仓库下载
        google()
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.0.1'
    }
}
```

参考资料：[码经，react-native报错：Could not find com.android.tools.build:gradle:3.0.1.](https://majing.io/posts/10000004111202)   

2）Could not find method android() for arguments

**You are using the wrong** build.gradle file。不是 android 目录下，是 app 目录下。。。。

3）`Execution failed for task ':app:processReleaseResources'`   

这个坑有点深，往上翻还可以看到下面的错误提示：   

```bash
/Users/liuxiaoguang/work/lansheng/project/LS-APP/android/app/build/intermediates/res/merged/release/drawable-xxhdpi-v4/node_modules_reactnavigation_src_views_assets_backicon.png: error: uncompiled PNG file passed as argument. Must be compiled first into .flat file..
error: failed parsing overlays.
```

github 上对于这个问题的讨论很多 [gradlew assembleRelease failing at processReleaseResources [0.19]](https://github.com/facebook/react-native/issues/5787)   

但貌似是对于旧版 react-native 讨论，而我已经 0.51 了，所以上述即便点赞很多的也没有可以解决我遇到问题的。   

在这个问答中解决了：[Issues with resources generated by react in Android Studio 3](https://stackoverflow.com/questions/45954209/issues-with-resources-generated-by-react-in-android-studio-3)   

解决方法就是在 android > gradle.properties 文件最后添加下面代码：   

```js
classpath 'com.android.tools.build:gradle:3.0.0'
distributionUrl=https://services.gradle.org/distributions/gradle-4.1-all.zip
android.enableAapt2=false
```

不明觉厉。   
