## JSONP

**原理**

Web 页面上调用 js 文件不受浏览器同源策略的影响，所以通过 `script` 便签可以进行跨域的请求：

- 首先前端先设置好回调函数，并将其作为 url 的参数；
- 服务端接收到请求后，通过该参数获得回调函数名，并将数据放在参数中将其返回；
- 收到结果后因为是 `script` 标签，所以浏览器会当做是脚本进行运行，从而达到跨域获取数据的目的。

**优点**

- 兼容性很好，在古老的浏览器也能很好的运行；
- 它不像 `XMLHttpRequest` 对象实现 Ajax 请求那样受到同源策略的限制；
- 不需要 `XMLHttpRequest` 或 `ActiveX` 的支持；并且在请求完毕后可以通过调用 callback 的方式回传结果。

**缺点**

- 它支持 GET 请求而不支持 POST 等其它类行的 HTTP 请求；
- 它只支持跨域 HTTP 请求这种情况，不能解决不同域的两个页面或 iframe 之间进行数据通信的问题。

**应用场景**

获取不能控制的服务端的资源，并且仅适用于 `get` 请求。

> 实例参考jsonp文件夹下的jsonp.html文件

## CORS

CORS已经是W3C的标准了，如果浏览器支持，只需要服务器配置CORS接口就好，前端代码就像请求同Origin的资源一样。

**原理**

CORS 背后的基本思想，就是使用自定义的 HTTP 头部让浏览器与服务器进行沟通，从而决定请求或响应是应该成功还是失败。

其中发送请求时，浏览器 **自动** 在请求头部加上源信息（协议，域名和端口）作为 `Origin` 属性的值，不需要前端做配置，比如   

Origin:http://localhost:3000   

**使用CORS方法主要工作** 在后端，需要后端同学在服务器响应头部添加 `Access-Control-Allow-Origin` 字段，该值要与请求头中Origin一致才能生效，否则跨域失败

**优点**

- 使用简单方便，更为安全

- HTTP标准中的方法都支持

**缺点**

- 兼容性：仅支持IE10以上

**应用场景**

在请求资源的服务器可配置的情况下（比如请求自己公司的资源或者自己个人项目），**优先使用**。

> 实例参考CORS文件夹下的文件，需要在电脑全局安装node

## 其他

其他还可以通过 `iframe` 实现跨域资源请求，但不常用。   

实际上，如果是自己不受控的服务器资源，一般也只需要 `get` 请求获取信息，比如豆瓣电影、读书，或者天气信息，必要的时候只需要通过url传参就好，毕竟是不受控资源，也不可能传递涉及隐私的资源。

而对于需要支持 `get` 之外的请求方法，这时候往往涉及复杂的业务逻辑或者对安全性要求较高，这时候应该选择自己可以控制的服务器，进而可以配置CORS接口，直接使用CORS实现跨域请求。
